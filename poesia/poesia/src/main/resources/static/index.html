<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Versos del Alma | Colección de Poesía</title>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        /* --- NUEVA PALETA DE COLORES ROSA/FEMENINA --- */
        :root {
            --bg-color: #fff5f8;           /* Fondo rosa muy pálido (como seda) */
            --text-color: #543d41;         /* Texto principal: un marrón rojizo oscuro y cálido */
            --accent-color: #d67c93;       /* Color acento: Rosa viejo / Dusty Rose elegante */
            --accent-hover: #b8657a;       /* Un tono más oscuro para los hovers */
            --secondary-color: #a39094;    /* Textos secundarios, un tono malva apagado */
            --card-bg: #ffffff;            /* Fondo blanco puro para las tarjetas */
            --card-border: #ffe6ee;        /* Un borde rosado muy sutil */
            --card-shadow: 0 15px 35px rgba(214, 124, 147, 0.15); /* Sombra con tinte rosado */

            --font-serif: 'Playfair Display', serif;
            --font-sans: 'Lato', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: var(--font-sans);
            line-height: 1.6;
            overflow-x: hidden;
            background-image: linear-gradient(to bottom, #fffbfd 0%, #fff5f8 100%); /* Degradado sutil */
        }

        /* --- HEADER & HERO --- */
        header {
            padding: 2rem 5%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-family: var(--font-serif);
            font-size: 1.6rem;
            font-weight: 700;
            letter-spacing: 1px;
            color: var(--accent-color); /* Logo en rosa */
        }

        .btn-write {
            background: transparent;
            border: 2px solid var(--accent-color); /* Borde rosa */
            color: var(--accent-color);
            padding: 8px 24px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: 700;
        }

        .btn-write:hover {
            background: var(--accent-color);
            color: white;
            box-shadow: 0 5px 15px rgba(214, 124, 147, 0.3);
        }

        .hero {
            text-align: center;
            padding: 4rem 1rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .hero h1 {
            font-family: var(--font-serif);
            font-size: 4rem;
            margin-bottom: 1rem;
            font-style: italic;
            background: linear-gradient(45deg, var(--text-color), var(--accent-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .hero p {
            color: var(--secondary-color);
            font-size: 1.15rem;
        }

        /* --- FILTROS --- */
        .filters {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 3.5rem;
        }

        .filter-btn {
            border: none;
            background: none;
            cursor: pointer;
            font-size: 1rem;
            color: var(--secondary-color);
            padding-bottom: 8px;
            position: relative;
            font-family: var(--font-sans);
            transition: color 0.3s ease;
        }

        .filter-btn:hover {
             color: var(--accent-color);
        }

        .filter-btn.active {
            color: var(--accent-color);
            font-weight: 700;
        }

        .filter-btn.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 25%;
            width: 50%; /* Línea más corta y centrada */
            height: 3px;
            background: var(--accent-color);
            border-radius: 2px;
        }

        /* --- GRID DE POEMAS --- */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem 5rem;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 45px;
        }

        .card {
            background: var(--card-bg);
            padding: 2.5rem;
            border-radius: 12px; /* Bordes más redondeados y suaves */
            box-shadow: var(--card-shadow);
            transition: all 0.4s ease;
            position: relative;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 380px;
            border: 1px solid var(--card-border);
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 45px rgba(214, 124, 147, 0.25);
            border-color: #ffd1e0;
        }

        .card-tag {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            color: var(--secondary-color);
            margin-bottom: 1.5rem;
            display: flex;
            justify-content: space-between;
            font-weight: 700;
        }

        .premium-badge {
            color: var(--accent-color);
            background: #fff0f4; /* Fondo sutil para el badge */
            padding: 2px 8px;
            border-radius: 10px;
        }

        .card h2 {
            font-family: var(--font-serif);
            font-size: 2rem;
            margin-bottom: 1rem;
            line-height: 1.15;
            color: var(--text-color);
        }

        .card-preview {
            font-family: var(--font-serif);
            color: #7a676a; /* Un gris un poco más cálido */
            font-size: 1.05rem;
            margin-bottom: 2rem;
            flex-grow: 1;
            white-space: pre-line;
            overflow: hidden;
            max-height: 160px;
            position: relative;
            font-style: italic;
        }

        .card-preview::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            /* Degradado a blanco, que es el fondo de la tarjeta */
            background: linear-gradient(transparent, var(--card-bg));
        }

        .card-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-top: 1px solid var(--card-border);
            padding-top: 1.2rem;
        }

        .read-btn {
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--secondary-color);
            text-decoration: none;
            transition: color 0.3s;
        }

        .card:hover .read-btn {
             color: var(--accent-color);
        }

        .price-tag {
            font-weight: 700;
            color: var(--accent-color);
            font-size: 1.1rem;
        }

        /* --- MODAL LECTURA --- */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 245, 248, 0.97); /* Fondo rosa casi opaco */
            backdrop-filter: blur(8px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
        }

        .modal-overlay.open {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: #fff;
            width: 90%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 4rem;
            box-shadow: 0 25px 70px rgba(214, 124, 147, 0.2);
            position: relative;
            text-align: center;
            border-radius: 16px;
            border: 1px solid var(--card-border);
        }

        /* Custom Scrollbar para el modal */
        .modal-content::-webkit-scrollbar { width: 8px; }
        .modal-content::-webkit-scrollbar-track { background: #fff0f4; }
        .modal-content::-webkit-scrollbar-thumb { background: var(--accent-color); border-radius: 4px;}

        .close-modal {
            position: absolute;
            top: 25px;
            right: 35px;
            font-size: 2.5rem;
            cursor: pointer;
            background: none;
            border: none;
            color: var(--accent-color);
            transition: transform 0.3s;
        }

        .close-modal:hover { transform: rotate(90deg); }

        .poem-full-title {
            font-family: var(--font-serif);
            font-size: 3rem;
            margin-bottom: 2.5rem;
            color: var(--accent-color);
        }

        .poem-body {
            font-family: var(--font-serif);
            font-size: 1.3rem;
            line-height: 2.2;
            color: var(--text-color);
            white-space: pre-wrap;
            text-align: left;
            padding: 0 1rem;
        }

        /* Bloqueo Premium */
        .locked-content {
            filter: blur(10px);
            user-select: none;
            pointer-events: none;
            opacity: 0.5;
        }

        .pay-wall {
            position: absolute;
            top: 55%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            width: 85%;
            background: rgba(255,255,255,0.95);
            padding: 3rem 2rem;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border: 2px solid var(--accent-color);
        }

        .pay-wall h3 { font-family: var(--font-serif); color: var(--accent-color); font-size: 1.8rem; margin-bottom: 1rem;}

        .btn-buy {
            background: var(--accent-color);
            color: #fff;
            border: none;
            padding: 15px 40px;
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 1.5rem;
            transition: all 0.3s;
            border-radius: 50px;
            box-shadow: 0 5px 15px rgba(214, 124, 147, 0.4);
        }

        .btn-buy:hover {
            background: var(--accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(214, 124, 147, 0.5);
        }

        /* --- MODAL UPLOAD --- */
        .form-group {
            margin-bottom: 1.8rem;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.8rem;
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--text-color);
        }

        .form-input, .form-textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--card-border);
            font-family: var(--font-sans);
            border-radius: 10px;
            background: #fffbfd;
            transition: border-color 0.3s;
            font-size: 1rem;
            color: var(--text-color);
        }

        .form-input:focus, .form-textarea:focus {
            outline: none;
            border-color: var(--accent-color);
            background: #fff;
        }

        .form-textarea {
            height: 180px;
            font-family: var(--font-serif);
            line-height: 1.8;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 12px;
            background: #fff0f4;
            padding: 15px;
            border-radius: 10px;
        }

        input[type="checkbox"] {
            accent-color: var(--accent-color);
            width: 18px; height: 18px;
        }

    </style>
</head>
<body>

<header>
    <div class="logo"> <i class="fas fa-feather-alt"></i> Anthology.</div>
    <button class="btn-write" onclick="openUploadModal()">Escribir</button>
</header>

<section class="hero">
    <h1>Versos de Seda y Alma</h1>
    <p>Una colección íntima de sentimientos. Donde las palabras se visten de rosa y los secretos esperan ser descubiertos.</p>
</section>

<div class="filters">
    <button class="filter-btn active" onclick="filterPoetry('all', this)">Todo</button>
    <button class="filter-btn" onclick="filterPoetry('free', this)">Gratis</button>
    <button class="filter-btn" onclick="filterPoetry('premium', this)">Premium</button>
</div>

<div class="container">
    <div class="grid" id="poetryGrid">
    </div>
</div>

<div class="modal-overlay" id="readModal">
    <div class="modal-content">
        <button class="close-modal" onclick="closeModal('readModal')">&times;</button>
        <div id="modalContent">
        </div>
    </div>
</div>

<div class="modal-overlay" id="uploadModal">
    <div class="modal-content" style="text-align: left;">
        <button class="close-modal" onclick="closeModal('uploadModal')">&times;</button>
        <h2 style="font-family: var(--font-serif); margin-bottom: 2rem; color: var(--accent-color); text-align: center;">Publicar nuevo poema</h2>
        <form id="uploadForm" onsubmit="handleUpload(event)">
            <div class="form-group">
                <label>Título</label>
                <input type="text" id="pTitle" class="form-input" required placeholder="Ej: Susurros de atardecer">
            </div>
            <div class="form-group">
                <label>Contenido del Poema</label>
                <textarea id="pBody" class="form-textarea" required placeholder="Escribe tus versos aquí..."></textarea>
            </div>
            <div class="form-group checkbox-group">
                <input type="checkbox" id="pPremium" onchange="togglePriceInput()">
                <label for="pPremium" style="margin-bottom: 0; cursor: pointer;">¿Es contenido Premium?</label>
            </div>
            <div class="form-group" id="priceGroup" style="display:none; animation: fadeIn 0.3s ease;">
                <label>Precio ($ USD)</label>
                <input type="number" id="pPrice" class="form-input" placeholder="Ej: 2.99" step="0.01">
            </div>
            <button type="submit" class="btn-buy" style="width: 100%; margin-top: 1rem;">Publicar Poema</button>
        </form>
    </div>
</div>

<script>
        // --- DATOS INICIALES (Ejemplos actualizados) ---
        const defaultPoems = [
            {
                id: 1,
                title: "Bailarina de Porcelana",
                body: "Giras en la caja de música de mi memoria,\nfrágil, con tu vestido de tul rosa pálido.\nLa melodía se oxida, pero tú sigues intacta,\nen un baile eterno que nunca ha terminado.\n\nMis dedos trazan el borde de tu figura,\ncon miedo a romper lo que ya no existe.\nEres el recuerdo de una dulzura\nque en este mundo gris aún resiste.",
                premium: false,
                price: 0
            },
            {
                id: 2,
                title: "El Color de los Secretos",
                body: "No es rojo pasión, ni negro luto.\nMis secretos tienen el color del rubor en las mejillas\ncuando se dice una verdad a medias.\n\n(Contenido exclusivo para almas curiosas...)\nEstán guardados en cajones de seda,\nolorosos a lavanda y arrepentimiento.\nSolo quien se atreve a abrir el cerrojo\nconoce el peso real de este sentimiento.",
                premium: true,
                price: 2.50
            },
            {
                id: 3,
                title: "Té de Rosas a Media Tarde",
                body: "El vapor empaña la ventana,\nmientras el sol de las cinco se rinde.\nBebo despacio la infusión tibia,\ny dejo que el silencio me brinde\nlas respuestas que la mañana me negó.",
                premium: false,
                price: 0
            }
        ];

        // Cargar datos
        let poems = JSON.parse(localStorage.getItem('myPoems')) || defaultPoems;

        // --- RENDERIZADO ---
        const grid = document.getElementById('poetryGrid');

        function renderPoems(filter = 'all') {
            grid.innerHTML = '';
            const filteredPoems = poems.filter(p => {
                if (filter === 'free') return !p.premium;
                if (filter === 'premium') return p.premium;
                return true;
            });

            filteredPoems.forEach(poem => {
                const card = document.createElement('div');
                card.className = 'card';
                card.onclick = () => openPoem(poem.id);
                const snippet = poem.body.split('\n').slice(0, 4).join('\n');

                card.innerHTML = `
                    <div>
                        <div class="card-tag">
                            <span>Poesía</span>
                            ${poem.premium ? '<span class="premium-badge"><i class="fas fa-heart"></i> Premium</span>' : '<span>Gratis</span>'}
                        </div>
                        <h2>${poem.title}</h2>
                        <div class="card-preview">${snippet}...</div>
                    </div>
                    <div class="card-footer">
                        <span class="read-btn">Leer versos <i class="fas fa-arrow-right" style="font-size: 0.8rem; margin-left: 5px;"></i></span>
                        ${poem.premium ? `<span class="price-tag">$${poem.price}</span>` : ''}
                    </div>
                `;
                grid.appendChild(card);
            });
        }

        // --- FILTRADO ---
        function filterPoetry(type, btn) {
            document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            renderPoems(type);
        }

        // --- MODALES ---
        function openPoem(id) {
            const poem = poems.find(p => p.id === id);
            const modalContent = document.getElementById('modalContent');
            const overlay = document.getElementById('readModal');
            let contentHtml = '';

            if (poem.premium) {
                contentHtml = `
                    <h1 class="poem-full-title"><i class="fas fa-lock" style="font-size: 1.5rem; opacity: 0.5;"></i> ${poem.title}</h1>
                    <div style="position: relative;">
                        <div class="poem-body locked-content" id="lockedText">
                            ${poem.body}
                            <br><br>[...Resto del poema oculto...]<br><br>Lorem ipsum dolor sit amet...
                        </div>
                        <div class="pay-wall" id="payWall">
                            <h3><i class="far fa-heart"></i> Contenido Exclusivo</h3>
                            <p style="color: var(--secondary-color); margin-bottom: 1rem;">Desbloquea este poema para leerlo completo.</p>
                            <button class="btn-buy" onclick="simulatePayment(event)">Desbloquear por $${poem.price}</button>
                        </div>
                    </div>
                `;
            } else {
                contentHtml = `
                    <h1 class="poem-full-title">${poem.title}</h1>
                    <div class="poem-body">${poem.body}</div>
                    <div style="margin-top: 4rem; color: var(--accent-color); font-size: 1.2rem; opacity: 0.6;">
                        <i class="fas fa-seedling"></i>
                    </div>
                `;
            }
            modalContent.innerHTML = contentHtml;
            overlay.classList.add('open');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('open');
        }
        function openUploadModal() {
            document.getElementById('uploadModal').classList.add('open');
        }

        // --- PAGO SIMULADO ---
        window.simulatePayment = function(e) {
            e.stopPropagation();
            const btn = e.target;
            btn.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Procesando...';
            setTimeout(() => {
                document.getElementById('payWall').style.display = 'none';
                document.getElementById('lockedText').classList.remove('locked-content');
            }, 1500);
        }

        // --- SUBIDA (ADMIN) ---
        function togglePriceInput() {
            const isPremium = document.getElementById('pPremium').checked;
            document.getElementById('priceGroup').style.display = isPremium ? 'block' : 'none';
        }

        function handleUpload(e) {
            e.preventDefault();
            const title = document.getElementById('pTitle').value;
            const body = document.getElementById('pBody').value;
            const isPremium = document.getElementById('pPremium').checked;
            const price = isPremium ? document.getElementById('pPrice').value : 0;

            const newPoem = { id: Date.now(), title, body, premium: isPremium, price };
            poems.unshift(newPoem);
            localStorage.setItem('myPoems', JSON.stringify(poems));

            document.getElementById('uploadForm').reset();
            document.getElementById('priceGroup').style.display = 'none';
            closeModal('uploadModal');
            renderPoems('all');
        }

        renderPoems();

        window.onclick = function(event) {
            if (event.target.classList.contains('modal-overlay')) {
                event.target.classList.remove('open');
            }
        }
    </script>
</body>
</html>